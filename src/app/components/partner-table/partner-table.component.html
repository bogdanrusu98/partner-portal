<div *ngIf="isLoading" class="flex justify-center items-center py-10">
    <div class="w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"></div>
</div>

<div *ngIf="error" class="text-red-500 text-center mt-10">{{ error }}</div>

<div *ngIf="!isLoading && !error" class="overflow-x-auto mt-0">
    <table class="min-w-full">
        <thead>
            <tr class="bg-[#031050] text-left text-[#F8FCFF]">

                <th class="p-3 font-normal cursor-pointer" (click)="setSort('id')">
                    <div class="flex items-center gap-1">
                        ID
                        <svg *ngIf="sortColumn === 'id'" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path [attr.d]="sortDirection === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'"
                                stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                    </div>
                </th>

                <th class="p-3 font-normal cursor-pointer" (click)="setSort('partnerName')">
                    <div class="flex items-center gap-1">
                        Name
                        <svg *ngIf="sortColumn === 'partnerName'" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path [attr.d]="sortDirection === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'"
                                stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                    </div>
                </th>

                <th class="p-3 font-normal cursor-pointer" (click)="setSort('partnerType')">
                    <div class="flex items-center gap-1">
                        Type
                        <svg *ngIf="sortColumn === 'partnerType'" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path [attr.d]="sortDirection === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'"
                                stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                    </div>
                </th>

                <th class="p-3 font-normal cursor-pointer" (click)="setSort('contract')">
                    <div class="flex items-center gap-1">
                        Contract
                        <svg *ngIf="sortColumn === 'contract'" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path [attr.d]="sortDirection === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'"
                                stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                    </div>
                </th>

                <th class="p-3 font-normal cursor-pointer" (click)="setSort('grosssales')">
                    <div class="flex items-center gap-1">
                        Gross Sales
                        <svg *ngIf="sortColumn === 'grosssales'" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path [attr.d]="sortDirection === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'"
                                stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                    </div>
                </th>
                <th class="p-3 font-normal cursor-pointer" (click)="setSort('commissions')">
                    <div class="flex items-center gap-1">
                        Commissions
                        <svg *ngIf="sortColumn === 'commissions'" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path [attr.d]="sortDirection === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'"
                                stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                    </div>
                </th>

                <th class="p-3 font-normal cursor-pointer" (click)="setSort('conversions')">
                    <div class="flex items-center gap-1">
                        Conversions
                        <svg *ngIf="sortColumn === 'conversions'" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path [attr.d]="sortDirection === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'"
                                stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                    </div>
                </th>
                <th class="p-3 font-normal"></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let partner of paginatedPartners"
                class="odd:bg-[#F4F7FE] even:bg-[#F9FBFE] border-b hover:bg-gray-50 text-[#031050]">
                <td class="p-3 text-center">{{ partner.id }}</td>
                <td class="p-3">{{ partner.partnerName }}</td>
                <td class="p-3">{{ partner.partnerType }}</td>
                <td class="p-3">{{ partner.contract }}</td>
                <td class="p-3">${{ partner.grosssales }}</td>
                <td class="p-3">${{ partner.commissions }}</td>
                <td class="p-3">{{ partner.conversions }}</td>

                <!-- Button Details -->
                <td class="p-3 text-center">
                    <button
                        class="flex items-center justify-center gap-1 px-4 py-1 text-sm font-medium text-white rounded-full bg-gradient-to-r from-[#5E33CE] to-[#1E0B50] shadow hover:opacity-90 transition">
                        Details
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="flex flex-col items-center mt-6 space-y-2">
        <span class="text-sm text-[#031050]">
            Showing {{ showingFrom }}–{{ showingTo }} of {{ partners.length }} entries
        </span>

        <!-- Pagination -->
        <div class="inline-flex items-center gap-1">
            <button (click)="setPage(currentPage - 1)" [disabled]="currentPage === 1"
                class="h-8 w-8 rounded-full border text-[#031050] hover:bg-gray-100 disabled:opacity-30">
                ‹
            </button>

            <button class="h-8 w-8 rounded-full border text-sm font-medium bg-[#4F26B8] text-white">
                {{ currentPage }}
            </button>

            <button (click)="setPage(currentPage + 1)" [disabled]="currentPage === totalPages"
                class="h-8 w-8 rounded-full border text-[#031050] hover:bg-gray-100 disabled:opacity-30">
                ›
            </button>
        </div>
    </div>



</div>